 (function(e,t){var n=typeof window!==t&&!!e.navigator&&!!e.document;if(n){var r=e.document,i=e.location,s=function(){},o=Array.prototype,u=Object,a=u.prototype.toString,f=r.head||r.getElementsByTagName("head")[0]||r.documentElement,l=navigator.userAgent,c=Number(l.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536,h=l.indexOf("Firefox")>0&&!("onload"in r.createElement("link")),p=r.getElementsByTagName("script"),d=p[p.length-1],v=d.getAttribute("data-path")||d.src||d.getAttribute("src"),m,g,y=d.getAttribute("data-config"),b=d.getAttribute("data-main"),w="utf-8",E=f.getElementsByTagName("base")[0],S=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,x=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,T={},N={},C={},k=[],L=function(e,t){if(arguments.length===1)return e;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},A=L({isString:function(e){return a.call(e)==="[object String]"},isFunction:function(e){return a.call(e)==="[object Function]"},isObject:function(e){return e===u(e)},forEach:o.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},filter:o.filter?function(e,t){return e.filter(t)}:function(e,t){var n=[];return A.forEach(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},map:o.map?function(e,t){return e.map(t)}:function(e,t){var n=[];return A.forEach(e,function(e,r,i){n.push(t(e,r,i))}),n},keys:u.keys?u.keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},indexOf:o.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},unique:function(e){var t={};return A.forEach(e,function(e){t[e]=1}),A.keys(t)},_poll:function(e,t){var n;if(c&&e.sheet)n=!0;else if(h&&e.sheet)try{e.sheet.cssRules&&(n=!0)}catch(r){r.name==="NS_ERROR_DOM_SECURITY_ERR"&&(n=!0)}setTimeout(function(){n&&A.isFunction(t)?t():n||A._poll(e,t)},1)},_createNode:function(e,t){var n=r.createElement(e);return t&&(n.charset=t),n},_insertScript:function(e){E?f.insertBefore(e,E):f.appendChild(e)},getScript:function(e,n,r){var i=A._createNode("script",r);i.onload=i.onerror=i.onreadystatechange=function(){/loaded|complete|undefined/.test(i.readyState)&&(i.onload=i.onerror=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=t,A.isFunction(n)&&n())},i.async="async",i.src=e,A._insertScript(i)},_fetch:function(e,t){if(C[e]){t();return}if(T[e]){N[e].push(t);return}T[e]=!0,N[e]=[t],A.getScript(e,function(){C[e]=!0,delete T[e];var t=N[e];t&&(delete N[e],A.forEach(t,function(e){e()}))},w)},getDependencies:function(e){var t=[];return e.replace(S,"").replace(x,function(e,n){t.push(n)}),A.unique(t)},getPureDependencies:function(e){var t=e.id;return A.filter(e.dependencies,function(e){k.push(t);var n=A.isCircularWaiting(O.cache[e]);return n&&k.push(t),k.pop(),!n})},isCircularWaiting:function(e){if(!e||e.status!==O.status.save)return!1;k.push(e.uri);var t=e.dependencies;if(t.length){if(A.isOverlap(t,k))return!0;for(var n=0;n<t.length;n++)if(A.isCircularWaiting(O.cache[t[n]]))return!0}return k.pop(),!1},isOverlap:function(e,t){var n=e.concat(t);return n.length>A.unique(n).length},runModuleContext:function(e,n){var r=e(n.require,n.exports,n);r!==t&&(n.exports=r)},dirname:function(e){var t=e.match(/[^?]*(?=\/.*$)/);return(t?t[0]:".")+"/"},realpath:function(e){var t=/([^:\/])\/\/+/g;t.lastIndex=0,t.test(e)&&(e=e.replace(t,"$1/"));if(e.indexOf(".")===-1)return e;var n=e.split("/"),r=[],i;for(var s=0;s<n.length;s++){i=n[s];if(i===".."){if(r.length===0)throw new Error("The path is invalid: "+e);r.pop()}else i!=="."&&r.push(i)}return r.join("/")},normalize:function(e){e=A.realpath(e);var t=e.charAt(e.length-1);return t==="/"?e:(t==="#"?e=e.slice(0,-1):e.indexOf("?")===-1&&!/\.(?:css|js)$/.test(e)&&(e+=".js"),e.indexOf(":80/")>0&&(e=e.replace(":80/","/")),e)},resolve:function(e,t){var n="";return e?(e.indexOf("./")===0||e.indexOf("../")===0?(e.indexOf("./")===0&&(e=e.substring(2)),n=A.dirname(t)+e):e.charAt(0)==="/"&&e.charAt(1)!=="/"?n=A.dirname(t)+e.substring(1):n=A.dirname(t)+"/"+e,A.normalize(n)):n},createUrl:function(e){return A.map(e,function(e){return m&&m.hasOwnProperty(e)&&(e=m[e]),e.indexOf("://")>0||e.indexOf("//")===0?(g&&(e=e+"?"+g),e):(e=A.resolve(e,v),g&&(e=e+"?"+g),e)})}});function O(e){this.id=e,this.status=0,this.dependencies=[],this.exports=null,this.parent=[],this.factory=s}L(O,{cache:{},status:{created:0,save:1,ready:2,compiling:3,compiled:4},define:function(e,t){if(!A.isString(e)||!A.isFunction(t))throw"define failed";e=A.createUrl([e]);var n=A.getDependencies(t.toString()),r=O.cache[e]||(O.cache[e]=new O(e));r.status<O.status.save&&(r.id=e,r.dependencies=A.createUrl(n),r.factory=t,r.status=O.status.save)},use:function(e,t){A.isString(e)&&(e=[e]);var n=A.createUrl(e);O._fetch(n,function(){var e=A.map(n,function(e){return e?O.cache[e]._compile():null});A.isFunction(t)&&t.apply(null,e)})},_fetch:function(e,t){var n=O.status,r=A.filter(e,function(e){return e&&(!O.cache[e]||O.cache[e].status<n.ready)}),i=r.length;if(i===0){t();return}var s=i;for(var o=0;o<i;o++){(function(e){function r(){t=O.cache[e];if(t.status>=n.save){var r=A.getPureDependencies(t);r.length?O._fetch(r,function(){u(t)}):u(t)}else u()}var t=O.cache[e]||(O.cache[e]=new O(e));t.status<O.status.save?A._fetch(e,r):r()})(r[o]);function u(e){(e||{}).status<n.ready&&(e.status=n.ready),--s,s===0&&t()}}}}),L(O.prototype,{_compile:function(){function require(n){var r=O.cache[A.createUrl([n])];return r?r.status===t.compiled?r.exports:(r.parent=e,r._compile()):null}var e=this,t=O.status;if(e.status===t.compiled)return e.exports;if(e.status<t.save)return null;e.status=t.compiling,require.cache=O.cache,e.require=require,e.exports={};var n=e.factory;return A.isFunction(n)&&A.runModuleContext(n,e),e.status=t.compiled,e.exports}}),e.define=O.define,e.lithe=L({use:O.use}),y?O.use(y,function(e){e.hasOwnProperty("alias")&&(m=e.alias),e.hasOwnProperty("base")&&(v=e.base),e.hasOwnProperty("timestamp")&&(g=e.timestamp),O.use(b)}):O.use(b)}else exports.tool=require("./lib/lithe-tool.js"),exports.hfs=require("./lib/lithe-hfs.js")})(this);
