!function(e,t){var n=!!(typeof window!==t&&e.navigator&&e.document);if(n){var r={};var i=e.document,a=e.location,s=function(){},u=Array.prototype,f=Object,c,o,l="utf-8",p=f.prototype.toString,d=i.head||i.getElementsByTagName("head")[0]||i.documentElement,h=navigator.userAgent,v=i.getElementsByTagName("script"),m=v[v.length-1],g=function(e,t){return e.getAttribute(t)},_=g(m,"data-path")||m.src||g(m,"src"),y=g(m,"data-config"),S=g(m,"data-debug")==="true",b=g(m,"data-main"),x=d.getElementsByTagName("base")[0],E=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,N=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,O={},w={},A={},C=[],D=[],k,P,j=[],q={},T=function(e,t){if(arguments.length===1)return e;else{for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}return e}};var U=T({isString:function(e){return p.call(e)==="[object String]"},isFunction:function(e){return p.call(e)==="[object Function]"},isObject:function(e){return e===f(e)},forEach:u.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},filter:u.filter?function(e,t){return e.filter(t)}:function(e,t){var n=[];U.forEach(e,function(e,r,i){if(t(e,r,i))n.push(e)});return n},map:u.map?function(e,t){return e.map(t)}:function(e,t){var n=[];U.forEach(e,function(e,r,i){n.push(t(e,r,i))});return n},keys:f.keys?f.keys:function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n))t.push(n)}return t},indexOf:u.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++){if(e[n]===t)return n}return-1},unique:function(e){var t={};U.forEach(e,function(e){t[e]=1});return U.keys(t)},_createNode:function(e,t){var n=i.createElement(e);if(t)n.charset=t;return n},_insertScript:function(e){x?d.insertBefore(e,x):d.appendChild(e)},getScript:function(e,n,r){var i=U._createNode("script",r);i.onload=i.onerror=i.onreadystatechange=function(){if(/loaded|complete|undefined/.test(i.readyState)){i.onload=i.onerror=i.onreadystatechange=null;if(i.parentNode&&!S)i.parentNode.removeChild(i);i=t;if(U.isFunction(n))n()}};i.async="async";i.src=e;k=i;U._insertScript(i);k=null},_fetch:function(e,t){if(A[e]){t();return}if(O[e]){w[e].push(t);return}O[e]=true;w[e]=[t];U.getScript(e,function(){A[e]=true;delete O[e];var t=w[e];if(t){delete w[e];U.forEach(t,function(e){e()})}},l)},getDependencies:function(e){var t=[];e.replace(E,"").replace(N,function(e,n){t.push(n)});return U.unique(t)},fixNameSpace:function(e,t){var n=U.findPathNameSpace(e);return U.map(t,function(e){var t=U.getNameSpace(e);if(n!=t&&t=="_main")return n+":"+e;return e})},findPathNameSpace:function(e){for(var t in r){if(new RegExp("^"+r[t].basepath).test(e))return t}return"_main"},getPureDependencies:function(e){var t=e.id;e.dependencies=U.fixNameSpace(t,e.dependencies);var n=U.filter(e.dependencies,function(e){C.push(t);var n=U.isCircularWaiting(F.cache[e]);if(n){C.push(t)}C.pop();return!n});return U.createUrl(n)},isCircularWaiting:function(e){if(!e||e.status!==F.status.save)return false;C.push(e.uri);var t=e.dependencies;if(t.length){if(U.isOverlap(t,C))return true;for(var n=0;n<t.length;n++){if(U.isCircularWaiting(F.cache[t[n]]))return true}}C.pop();return false},isOverlap:function(e,t){var n=e.concat(t);return n.length>U.unique(n).length},runModuleContext:function(e,n){var r;try{r=e(n.require,n.exports,n)}catch(i){throw n.id+":"+i}if(r!==t)n.exports=r},dirname:function(e){var t=e.match(/[^?]*(?=\/.*$)/);return(t?t[0]:".")+"/"},realpath:function(e){var t=/([^:\/])\/\/+/g;t.lastIndex=0;if(t.test(e)){e=e.replace(t,"$1/")}if(e.indexOf(".")===-1){return e}var n=e.split("/"),r=[],i;for(var a=0;a<n.length;a++){i=n[a];if(i===".."){if(r.length===0){throw new Error("The path is invalid: "+e)}r.pop()}else if(i!=="."){r.push(i)}}return r.join("/")},normalize:function(e){e=U.realpath(e);var t=e.charAt(e.length-1);if(t==="/"){return e}if(t==="#"){e=e.slice(0,-1)}else if(e.indexOf("?")===-1&&!/\.(?:js)$/.test(e)){e+=".js"}if(e.indexOf(":80/")>0){e=e.replace(":80/","/")}return e},resolve:function(e,t){var n="";if(!e){return n}else if(e.indexOf("./")===0||e.indexOf("../")===0){if(e.indexOf("./")===0){e=e.substring(2)}n=U.dirname(t)+e}else if(e.charAt(0)==="/"&&e.charAt(1)!=="/"){n=U.dirname(t)+e.substring(1)}else{n=U.dirname(t)+"/"+e}return U.normalize(n)},isAbsolute:function(e){return e.indexOf("://")>0||e.indexOf("//")===0},filename:function(e){return e.slice(e.lastIndexOf("/")+1).replace(/\?.*$/,"")},getNameSpace:function(e){if(U.isAbsolute(e))return"_main";else{var t=e.split(":");if(t[1])return t[0];return"_main"}},replaceDir:function(e,t){var n={};for(var r=0;r<t.length;r++){var i=t[r];for(var a in i){var s=i[a],u=new RegExp("^"+a+"/");if(u.test(e)&&!n[e]){e=e.replace(u,s);n[e]=true;break}}if(n[e])break}if(U.isAbsolute(e))e=U.normalize(e);return e},isDir:function(e){return e.lastIndexOf("/")===e.length-1},getAliasDir:function(e){var t=[];for(var n in e){if(U.isDir(e[n])){var r={};r[n]=e[n];t.push(r)}}return t},createUrl:function(e){return U.map(e,function(e){var t=U.getNameSpace(e);if(t!=="_main"){e=e.split(":")[1]}if(r.hasOwnProperty(e)){t=e}var n=r[t];if(n){var i=U.getAliasDir(n.alias);if(n.alias){var a=n.alias[e];if(a&&!U.isDir(a)){e=a}else if(i.length){e=U.replaceDir(e,i)}}if(!U.isAbsolute(e)){e=U.resolve(e,n.basepath)}if(n.timestamp)e=e+"?"+n.timestamp;return e}else{throw new Error("the namespace "+t+" is not found!")}})},buildNameSpace:function(e,t){U.addConfigs(e,function(e){U.forEach(e,function(e){var t=r[e.name];t.alias=e.alias;t.timestamp=e.timestamp});if(t)t()})},_hasClear:function(e,t){delete e[t];if(U.keys(e).length)return false;return true},addConfigs:function(e,t,n){var i=n||U.keys(r).length;if(U.keys(r).length===1){e.name="_main";t([e]);return}for(var a in r){var s=r[a]["config"];if(a==="_main")continue;if(q[a])continue;!function(e,n){q[n]=true;F.use(n+":"+e,function(e){e.name=n;j.push(e);U.addNameSpace(e);var a=U.keys(r).length;if(a>i)U.addConfigs(e,t,a);var s=U._hasClear(q,n);if(s)t(j)})}(s,a)}},addNameSpace:function(e){if(e.hasOwnProperty("namespace")){for(var t in e.namespace){var n=e.namespace[t];r[t]={basepath:n.basepath,config:n.config}}}},getCurrentScript:function(){if(k){return k}if(P&&P.readyState==="interactive"){return P}var e=d.getElementsByTagName("script");for(var t=e.length-1;t>=0;t--){var n=e[t];if(n.readyState==="interactive"){P=n;return P}}return P},pathToid:function(e,t){var n=U.findPathNameSpace(e);t=t||U.filename(e);var r=n==="_main"?t:n+":"+t;return U.createUrl([r])[0]},_save:function(e){if(D.length){U.forEach(D,function(t){t.id=U.pathToid(e,t.id);F._save(t.id,t)})}}});function F(e){this.id=e;this.status=0;this.dependencies=[];this.exports=null;this.parent=[];this.factory=s}T(F,{cache:{},status:{created:0,save:1,ready:2,compiling:3,compiled:4},_get:function(e){return F.cache[e]||(F.cache[e]=new F(e))},_save:function(e,t){var n=this._get(e);if(n.status<F.status.save){n.id=e||t.id;n.dependencies=t.deps;n.factory=t.factory;n.status=F.status.save}},define:function(e,t){if(!U.isString(e)||!U.isFunction(t)){throw"define failed"}var n=U.getDependencies(t.toString());var r={deps:n,factory:t};if(U.isAbsolute(e))r.id=e;if(!r.id&&i.attachEvent){var a=U.getCurrentScript();if(a){r.id=U.pathToid(a.src)}else{throw new Error('failed to derive:" '+t)}}if(r.id){F._save(r.id,r)}else{r.id=e;D.push(r)}},_createUrls:function(e){U.isString(e)&&(e=[e]);var t=U.createUrl(e);return t},use:function(e,t){var n=F._createUrls(e);F._fetch(n,function(){var e=U.map(n,function(e){return e?F.cache[e]._compile():null});if(U.isFunction(t))t.apply(null,e)})},_preload:function(e,t){var n=F._createUrls(e)[0];U._fetch(n,function(){var e=D.length;if(e){if(e>1){U._save(n)}else{F._save(n,D[0])}D=[]}t()})},_fetch:function(e,t){var n=F.status,r=U.filter(e,function(e){return e&&(!F.cache[e]||F.cache[e].status<n.ready)}),i=function(e){(e||{}).status<n.ready&&(e.status=n.ready);--s;s===0&&t()},a=r.length;if(a===0){t();return}var s=a;for(var u=0;u<a;u++){!function(e){var t=F._get(e);t.status<F.status.save?U._fetch(e,r):r();function r(){var r=D.length;if(r){if(r>1){U._save(e)}else{F._save(e,D[0])}D=[]}t=F._get(e);if(t.status>=n.save){var a=U.getPureDependencies(t);if(a.length){F._fetch(a,function(){i(t)})}else{i(t)}}else{i()}}}(r[u])}}});T(F.prototype,{_compile:function(){var e=this,t=F.status;if(e.status===t.compiled)return e.exports;if(e.status<t.save)return null;e.status=t.compiling;function n(n){for(var r in e.dependencies){var i=e.dependencies[r],a=U.getNameSpace(i);if(a!="_main"&&n==i.split(":")[1])n=a+":"+n}n=U.createUrl([n]);var s=F.cache[n];if(!s)return null;if(s.status===t.compiled)return s.exports;s.parent=e;return s._compile()}n.cache=F.cache;e.require=n;e.exports={};var r=e.factory;if(U.isFunction(r)){U.runModuleContext(r,e)}e.status=t.compiled;return e.exports}});e.define=F.define;r["_main"]={basepath:U.dirname(_),config:y};e.lithe=T({use:F.use,cache:F.cache,NAMESPACE:r,_start:function(e,t){F.use(y,function(n){U.addNameSpace(n);U.buildNameSpace(n,function(){var i=r["_main"];i.alias=n.alias;i.timestamp=n.timestamp;if(n.basepath)i.basepath=n.basepath;if(S&&U.isFunction(n.debugswitch))e=n.debugswitch(e)||e;F.use(e,t)})})},start:function(e,t){if(y){if(S){lithe._start(e,t)}else{F._preload(e,function(){lithe._start(e,t)})}}else{F.use(e,t)}}});if(b)e.lithe.start(b)}else{exports.tool=require("./lib/lithe-tool.js");exports.hfs=require("./lib/lithe-hfs.js")}}(this);